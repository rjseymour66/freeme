{{- $sections := .Sections -}}
{{- $pages := .RegularPages -}}
{{- $combined := append $sections $pages -}}
{{- $sortedCombined := sort $combined "Weight" -}}

<ul>
    {{- range $sortedCombined }}
    <li>
        <a href="{{ .RelPermalink }}">{{ .Title }}</a>
        {{- if .IsSection }}
            {{- partial "toc-recursive.html" . }}
        {{- end }}
    </li>
    {{- end }}
</ul>